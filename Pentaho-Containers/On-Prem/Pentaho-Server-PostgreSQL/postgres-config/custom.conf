# ============================================
# PostgreSQL Custom Configuration for Pentaho
# ============================================
# This file is mounted to /etc/postgresql/conf.d/
# Include in postgresql.conf with: include_dir = 'conf.d'
# Note: PostgreSQL 15 may require manual configuration

# ----------------------------------------
# Connection Settings
# ----------------------------------------
max_connections = 200

# ----------------------------------------
# Memory Settings
# ----------------------------------------
# Shared memory for caching data (recommended: 25% of RAM)
shared_buffers = 256MB

# Memory for query operations
work_mem = 16MB

# Memory for maintenance operations (VACUUM, CREATE INDEX)
maintenance_work_mem = 128MB

# Planner's estimate of memory available for caching
effective_cache_size = 768MB

# ----------------------------------------
# WAL Settings
# ----------------------------------------
wal_buffers = 16MB
checkpoint_completion_target = 0.9
max_wal_size = 2GB
min_wal_size = 1GB

# ----------------------------------------
# Query Planner
# ----------------------------------------
# SSD-optimized settings
random_page_cost = 1.1
effective_io_concurrency = 200

# ----------------------------------------
# Logging
# ----------------------------------------
# Log DDL statements
log_statement = 'ddl'

# Log slow queries (1 second threshold)
log_min_duration_statement = 1000

# ----------------------------------------
# Locale Settings
# ----------------------------------------
lc_messages = 'en_US.UTF-8'
lc_monetary = 'en_US.UTF-8'
lc_numeric = 'en_US.UTF-8'
lc_time = 'en_US.UTF-8'

# ----------------------------------------
# Timezone
# ----------------------------------------
timezone = 'UTC'
