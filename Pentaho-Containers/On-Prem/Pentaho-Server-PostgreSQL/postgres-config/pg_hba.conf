# PostgreSQL Client Authentication Configuration File
# ===================================================
#
# This file controls: which hosts are allowed to connect, how clients
# are authenticated, which PostgreSQL user names they can use, which
# databases they can access.
#
# PostgreSQL 15+ uses scram-sha-256 as default password encryption.
# Using scram-sha-256 for all connections (more secure than md5).
#
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# ===================================================
# Local connections (Unix domain socket)
# ===================================================
local   all             postgres                                scram-sha-256
local   all             all                                     scram-sha-256

# ===================================================
# IPv4/IPv6 localhost connections
# ===================================================
host    all             all             127.0.0.1/32            scram-sha-256
host    all             all             ::1/128                 scram-sha-256

# ===================================================
# Pentaho Application Users (Docker network: 0.0.0.0/0)
# ===================================================

# JackRabbit Content Repository
host    jackrabbit      jcr_user        0.0.0.0/0               scram-sha-256

# Quartz Scheduler
host    quartz          pentaho_user    0.0.0.0/0               scram-sha-256

# Hibernate Repository (includes audit logs and operations mart)
host    hibernate       hibuser         0.0.0.0/0               scram-sha-256

# ===================================================
# Administrative Access
# ===================================================

# PostgreSQL superuser (for maintenance, backups, etc.)
host    all             postgres        0.0.0.0/0               scram-sha-256

# ===================================================
# Replication connections (if needed)
# ===================================================
local   replication     all                                     scram-sha-256
host    replication     all             127.0.0.1/32            scram-sha-256
host    replication     all             ::1/128                 scram-sha-256
